<!DOCTYPE html>
<html xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <title>Code coverage for Two-factor-auth-rails-6</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <script src='./assets/0.12.3/application.js' type='text/javascript'></script>
    <link href='./assets/0.12.3/application.css' media='screen, projection, print' rel='stylesheet' type='text/css' />
    <link rel="shortcut icon" type="image/png" href="./assets/0.12.3/favicon_red.png" />
    <link rel="icon" type="image/png" href="./assets/0.12.3/favicon.png" />
  </head>

  <body>
    <div id="loading">
      <img src="./assets/0.12.3/loading.gif" alt="loading"/>
    </div>
    <div id="wrapper" class="hide">
      <div class="timestamp">Generated <abbr class="timeago" title="2023-08-10T09:12:47-03:00">2023-08-10T09:12:47-03:00</abbr></div>
      <ul class="group_tabs"></ul>

      <div id="content">
        <div class="file_list_container" id="AllFiles">
  <h2>
    <span class="group_name">All Files</span>
    (<span class="covered_percent">
      <span class="red">
  20.29%
</span>

     </span>
     covered at
     <span class="covered_strength">
       <span class="red">
         0.2
       </span>
    </span> hits/line
    )
  </h2>

  <a name="AllFiles"></a>

  <div>
    <b>3</b> files in total.
  </div>

  <div class="t-line-summary">
    <b>69</b> relevant lines,
    <span class="green"><b>14</b> lines covered</span> and
    <span class="red"><b>55</b> lines missed. </span>
    (<span class="red">
  20.29%
</span>
)
  </div>



  <div class="file_list--responsive">
    <table class="file_list">
      <thead>
        <tr>
          <th>File</th>
          <th class="cell--number">% covered</th>
          <th class="cell--number">Lines</th>
          <th class="cell--number">Relevant Lines</th>
          <th class="cell--number">Lines covered</th>
          <th class="cell--number">Lines missed</th>
          <th class="cell--number">Avg. Hits / Line</th>

        </tr>
      </thead>
      <tbody>

          <tr class="t-file">
            <td class="strong t-file__name"><a href="#c7101bac4862e6a3c7ff2208947dae2a2cc77bb4" class="src_link" title="test/support/helpers/system/authentication_system_helper.rb">test/support/helpers/system/authentication_system_helper.rb</a></td>
            <td class="red strong cell--number t-file__coverage">35.71 %</td>
            <td class="cell--number">24</td>
            <td class="cell--number">14</td>
            <td class="cell--number">5</td>
            <td class="cell--number">9</td>
            <td class="cell--number">0.36</td>

          </tr>

          <tr class="t-file">
            <td class="strong t-file__name"><a href="#0c3685f4ecf64edba0a865c29d3402d0a58a1bce" class="src_link" title="test/system/two_factor_authentication/otp_session_expiration_test.rb">test/system/two_factor_authentication/otp_session_expiration_test.rb</a></td>
            <td class="red strong cell--number t-file__coverage">33.33 %</td>
            <td class="cell--number">20</td>
            <td class="cell--number">12</td>
            <td class="cell--number">4</td>
            <td class="cell--number">8</td>
            <td class="cell--number">0.33</td>

          </tr>

          <tr class="t-file">
            <td class="strong t-file__name"><a href="#58fd7009bebf4d01474e42aa91e68d4a36b4154b" class="src_link" title="test/system/two_factor_authentication/setup_2fa_test.rb">test/system/two_factor_authentication/setup_2fa_test.rb</a></td>
            <td class="red strong cell--number t-file__coverage">11.63 %</td>
            <td class="cell--number">63</td>
            <td class="cell--number">43</td>
            <td class="cell--number">5</td>
            <td class="cell--number">38</td>
            <td class="cell--number">0.12</td>

          </tr>

      </tbody>
    </table>
  </div>
</div>



      </div>

      <div id="footer">
        Generated by <a href="https://github.com/simplecov-ruby/simplecov">simplecov</a> v0.22.0
        and simplecov-html v0.12.3<br/>
        using RSpec
      </div>

      <div class="source_files">

        <div class="source_table" id="c7101bac4862e6a3c7ff2208947dae2a2cc77bb4">
  <div class="header">
    <h3>test/support/helpers/system/authentication_system_helper.rb</h3>
    <h4>
      <span class="red">
  35.71%
</span>

      lines covered
    </h4>



    <div class="t-line-summary">
      <b>14</b> relevant lines.
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>9</b> lines missed.</span>
    </div>



  </div>

  <pre>
    <ol>

        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>




            <code class="ruby">module AuthenticationSystemHelper</code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="2">
            <span class="hits">1</span>




            <code class="ruby">    def scan_the_qr_code_and_get_an_onetime_token(user)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="3">





            <code class="ruby">      user.reload.current_otp</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="4">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="5">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="6">
            <span class="hits">1</span>




            <code class="ruby">    def get_an_onetime_token_from_authenticator_app(user)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="7">





            <code class="ruby">      user.reload.current_otp</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="8">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="9">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>




            <code class="ruby">    def fill_in_digit_fields_with(number)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="11">





            <code class="ruby">      chars = number.to_s.split(&#39;&#39;)</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="12">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="13">





            <code class="ruby">      chars.each.with_index do |char, index|</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="14">





            <code class="ruby">        fill_in &quot;digit-#{index + 1}&quot;, with: char</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="15">





            <code class="ruby">      end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="16">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="17">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="18">
            <span class="hits">1</span>




            <code class="ruby">    def setup_2fa(user)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="19">





            <code class="ruby">      user.otp_secret = User.generate_otp_secret</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="20">





            <code class="ruby">      user.otp_required_for_login = true</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="21">





            <code class="ruby">      user.generate_otp_backup_codes!</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="22">





            <code class="ruby">      user.save!</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="23">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="24">





            <code class="ruby">  end</code>
          </li>
        </div>

    </ol>
  </pre>
</div>


        <div class="source_table" id="0c3685f4ecf64edba0a865c29d3402d0a58a1bce">
  <div class="header">
    <h3>test/system/two_factor_authentication/otp_session_expiration_test.rb</h3>
    <h4>
      <span class="red">
  33.33%
</span>

      lines covered
    </h4>



    <div class="t-line-summary">
      <b>12</b> relevant lines.
      <span class="green"><b>4</b> lines covered</span> and
      <span class="red"><b>8</b> lines missed.</span>
    </div>



  </div>

  <pre>
    <ol>

        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>




            <code class="ruby">    require &#39;application_system_test_case&#39;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="2">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>




            <code class="ruby">class OTPSessionExpiration &lt; ApplicationSystemTestCase</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="4">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>




            <code class="ruby">  setup do</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="6">





            <code class="ruby">    @hopper = users(:hopper)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="7">





            <code class="ruby">    sign_in @hopper</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="8">





            <code class="ruby">  end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="9">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>




            <code class="ruby">  test &quot;expire after 5 minutes on OTP login page&quot; do</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="11">





            <code class="ruby">    visit root_path</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="12">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Dashboard&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="13">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="14">





            <code class="ruby">    travel_to 5.minutes.after do</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="15">





            <code class="ruby">      refresh</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="16">





            <code class="ruby">      assert_selector &quot;h2&quot;, text: &quot;Log in&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="17">





            <code class="ruby">      assert_equal &quot;/users/sign_in&quot;, page.current_path</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="18">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="19">





            <code class="ruby">  end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="20">





            <code class="ruby">end</code>
          </li>
        </div>

    </ol>
  </pre>
</div>


        <div class="source_table" id="58fd7009bebf4d01474e42aa91e68d4a36b4154b">
  <div class="header">
    <h3>test/system/two_factor_authentication/setup_2fa_test.rb</h3>
    <h4>
      <span class="red">
  11.63%
</span>

      lines covered
    </h4>



    <div class="t-line-summary">
      <b>43</b> relevant lines.
      <span class="green"><b>5</b> lines covered</span> and
      <span class="red"><b>38</b> lines missed.</span>
    </div>



  </div>

  <pre>
    <ol>

        <div>
          <li class="covered" data-hits="1" data-linenumber="1">
            <span class="hits">1</span>




            <code class="ruby">require &#39;application_system_test_case&#39;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="2">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="3">
            <span class="hits">1</span>




            <code class="ruby">class Setup2FATest &lt; ApplicationSystemTestCase</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="4">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="5">
            <span class="hits">1</span>




            <code class="ruby">  setup do</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="6">





            <code class="ruby">    @hopper = users(:hopper)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="7">





            <code class="ruby">    sign_in @hopper</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="8">





            <code class="ruby">  end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="9">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="10">
            <span class="hits">1</span>




            <code class="ruby">  test &quot;can success setup 2FA and login with it&quot; do</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="11">





            <code class="ruby">    visit root_path</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="12">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Dashboard&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="13">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="14">





            <code class="ruby">    click_link &quot;MFA&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="15">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="16">





            <code class="ruby">    assert_selector &quot;h2&quot;, text: &quot;aplicativo autenticador&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="17">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="18">





            <code class="ruby">    click_on &quot;Habilitar&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="19">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Configurar autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="20">





            <code class="ruby">    assert_selector &quot;p&quot;, text: &quot;Use seu aplicativo de autenticação de dois fatores para escanear o código QR&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="21">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="22">





            <code class="ruby">    click_on &quot;Cancelar&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="23">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="24">





            <code class="ruby">    assert_equal two_factor_authentication_path, page.current_path</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="25">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="26">





            <code class="ruby">    click_on &quot;Habilitar&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="27">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Configurar autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="28">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="29">





            <code class="ruby">    token = scan_the_qr_code_and_get_an_onetime_token(@hopper)</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="30">





            <code class="ruby">    fill_in_digit_fields_with token</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="31">





            <code class="ruby">    click_button &quot;Confirme e ative&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="32">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Sucesso na configuração 2FA&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="33">





            <code class="ruby">    assert_selector &quot;p&quot;, text: &quot;Salve este código de backup de emergência e guarde-o em algum lugar seguro.&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="34">





            <code class="ruby">    assert_selector &quot;li&quot;, count: 12</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="35">





            <code class="ruby">    all(&quot;li&quot;).each do |li|</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="36">





            <code class="ruby">      assert_match /\w{8}/, li.text</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="37">





            <code class="ruby">    end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="38">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="39">





            <code class="ruby">    click_on &quot;Feito&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="40">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="41">





            <code class="ruby">    assert_selector &quot;h2&quot;, text: &quot;aplicativo autenticador&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="42">





            <code class="ruby">    assert_button &quot;Desativar&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="43">





            <code class="ruby">    assert_selector &quot;h2&quot;, text: &quot;códigos de recuperação&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="44">





            <code class="ruby">    assert_button &quot;Regerar&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="45">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="46">





            <code class="ruby">    click_on &quot;Regerar&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="47">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Êxito na regeneração dos códigos de recuperação&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="48">





            <code class="ruby">    assert_selector &quot;p&quot;, text: &quot;Salve este código de backup de emergência e guarde-o em algum lugar seguro.&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="49">





            <code class="ruby">    assert_selector &quot;li&quot;, count: 12</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="50">





            <code class="ruby">    save_recovery_codes</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="51">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="52">





            <code class="ruby">    click_on &quot;Feito&quot;</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="53">





            <code class="ruby">    assert_selector &quot;h1&quot;, text: &quot;Autenticação de dois fatores&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="54">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="55">





            <code class="ruby">    click_on &quot;Logout&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="56">





            <code class="ruby">    # assert_content &quot;Signed out successfully.&quot;</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="57">





            <code class="ruby">  end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="58">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="covered" data-hits="1" data-linenumber="59">
            <span class="hits">1</span>




            <code class="ruby">  def save_recovery_codes</code>
          </li>
        </div>

        <div>
          <li class="missed" data-hits="0" data-linenumber="60">





            <code class="ruby">    @recovery_codes = all(&quot;li&quot;).map(&amp;:text)</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="61">





            <code class="ruby">  end</code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="62">





            <code class="ruby"></code>
          </li>
        </div>

        <div>
          <li class="never" data-hits="" data-linenumber="63">





            <code class="ruby">end</code>
          </li>
        </div>

    </ol>
  </pre>
</div>


      </div>
    </div>
  </body>
</html>
